{{ $disqusShortname := site.Config.Services.Disqus.Shortname }}
{{ if $disqusShortname }}
<div id="disqus_thread_container" class="py-6" 
     data-page-url="{{ .Permalink }}" 
     data-page-identifier="{{ with .File }}{{ with .UniqueID }}{{ . }}{{ end }}{{ end }}">
  <div class="flex justify-center">
    <button 
      id="load-disqus" 
      class="px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-md transition-colors flex items-center shadow-sm"
      onclick="loadDisqus()">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
      </svg>
      {{ i18n "load_comments" | default "加载评论" }}
    </button>
  </div>
  <div id="disqus_thread"></div>
</div>

{{ $disqusJs := resources.Get "js/disqus-lazy.js" | resources.Minify | resources.Fingerprint }}
<script>
  // 将Disqus短名称传递给JavaScript
  var DISQUS_SHORTNAME = '{{ $disqusShortname }}';
</script>
<script src="{{ $disqusJs.RelPermalink }}"></script>
{{ end }} 